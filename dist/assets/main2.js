(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const r of t.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();function m(o){document.readyState!=="loading"?o():document.addEventListener("DOMContentLoaded",o)}function y(){const o=document.querySelectorAll(".animate-on-scroll");if(!o.length)return;const n={threshold:.15,rootMargin:"0px 0px -80px 0px"},s=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&t.target.classList.add("animated")})},n);o.forEach(e=>s.observe(e)),document.querySelectorAll(".cards, .pillar-grid").forEach(e=>{e.querySelectorAll(".card, .cluster").forEach((r,a)=>{r.style.transitionDelay=`${a*.1}s`})})}function h(){const o=document.querySelectorAll(".tab-button"),n=document.querySelectorAll(".tab-panel");if(!o.length||!n.length)return;const s=Array.from(o);function i(e){const t=e.getAttribute("data-tab"),r=document.getElementById(`panel-${t}`);if(!r)return;o.forEach(l=>{l.classList.remove("active"),l.setAttribute("aria-selected","false")}),n.forEach(l=>l.classList.remove("active")),e.classList.add("active"),e.setAttribute("aria-selected","true"),r.classList.add("active"),r.querySelectorAll(".cluster").forEach((l,c)=>{l.style.animation="none",setTimeout(()=>{l.style.animation=`fadeInUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) ${c*.1}s forwards`},10)})}o.forEach(e=>{e.addEventListener("click",()=>i(e)),e.addEventListener("keydown",t=>{const r=s.indexOf(e);let a=null;if(t.key==="ArrowRight"?(t.preventDefault(),a=(r+1)%s.length):t.key==="ArrowLeft"?(t.preventDefault(),a=r===0?s.length-1:r-1):t.key==="Home"?(t.preventDefault(),a=0):t.key==="End"&&(t.preventDefault(),a=s.length-1),a!==null){const l=s[a];l.click(),l.focus()}})})}function p(){const o=document.querySelectorAll('a[href^="#"]');o.length&&o.forEach(n=>{n.addEventListener("click",s=>{const i=n.getAttribute("href");if(!i||i==="#")return;const e=document.querySelector(i);e&&(s.preventDefault(),e.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,"",i))})})}function g(){const o=document.getElementById("contactForm");if(!o)return;const n=document.getElementById("submitBtn"),s=o.querySelector(".form-status")||document.querySelector(".form-status");!n||!s||o.addEventListener("submit",async i=>{i.preventDefault();const e=new FormData(o),t=Object.fromEntries(e.entries()),r=t.name,a=t.email,l=t.message;if(t.hp){console.log("Bot detected");return}if(!r||!a||!l){s.textContent="Please fill in name, email, and message.",s.style.color="#ff7676";return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)){s.textContent="Please enter a valid email address.",s.style.color="#ff7676";return}n.disabled=!0,o.classList.add("is-submitting"),s.textContent="Sending...",s.style.color="var(--light-blue)";try{const u=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),f=await u.json().catch(()=>({}));u.ok&&f.ok!==!1?(s.textContent="Thanks - we'll be in touch shortly.",s.style.color="var(--gold)",o.reset()):(s.textContent=f.error||"Something went wrong. Please try again.",s.style.color="#ff7676")}catch(u){console.error(u),s.textContent="Network error. Please try again.",s.style.color="#ff7676"}finally{n.disabled=!1,o.classList.remove("is-submitting")}})}function v(){const o=()=>window.innerWidth>=768;if(!o())return;const n=document.createElement("canvas");n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.pointerEvents="none",n.style.zIndex="9999",n.style.opacity="0.4",document.body.appendChild(n);const s=n.getContext("2d"),i=()=>{n.width=window.innerWidth,n.height=window.innerHeight};i();let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{if(!o()){n.remove();return}i()},100)});const t=[],r=2;class a{constructor(d,u){this.x=d,this.y=u,this.size=Math.random()*4+2,this.speedX=(Math.random()-.5)*1,this.speedY=(Math.random()-.5)*1,this.life=1}update(){this.x+=this.speedX,this.y+=this.speedY,this.life-=.015,this.size>.1&&(this.size-=.04)}draw(){s.fillStyle=`rgba(212, 175, 55, ${this.life})`,s.shadowBlur=10,s.shadowColor=`rgba(212, 175, 55, ${this.life*.5})`,s.beginPath(),s.arc(this.x,this.y,this.size,0,Math.PI*2),s.fill(),s.shadowBlur=0}}document.addEventListener("mousemove",c=>{const d=c.clientX,u=c.clientY;for(let f=0;f<r;f++)t.push(new a(d,u))});function l(){s.clearRect(0,0,n.width,n.height);for(let c=t.length-1;c>=0;c--){const d=t[c];d.update(),d.draw(),d.life<=0&&t.splice(c,1)}requestAnimationFrame(l)}l()}function b(){const o=document.querySelector(".navbar"),n=document.querySelector(".nav-toggle"),s=document.querySelectorAll(".nav-links a"),i=document.querySelector(".nav-links");!o||!n||(n.addEventListener("click",()=>{const e=o.classList.toggle("is-open");n.setAttribute("aria-expanded",e?"true":"false"),e?document.body.style.overflow="hidden":document.body.style.overflow="",e&&i&&i.querySelectorAll("a").forEach((r,a)=>{r.style.opacity="0",r.style.transform="translateX(20px)",setTimeout(()=>{r.style.transition="opacity 0.3s ease, transform 0.3s ease",r.style.opacity="1",r.style.transform="translateX(0)"},100+a*80)})}),s.forEach(e=>{e.addEventListener("click",()=>{o.classList.remove("is-open"),n.setAttribute("aria-expanded","false"),document.body.style.overflow=""})}),document.addEventListener("click",e=>{o.classList.contains("is-open")&&!o.contains(e.target)&&!n.contains(e.target)&&(o.classList.remove("is-open"),n.setAttribute("aria-expanded","false"),document.body.style.overflow="")}),document.addEventListener("keydown",e=>{e.key==="Escape"&&o.classList.contains("is-open")&&(o.classList.remove("is-open"),n.setAttribute("aria-expanded","false"),document.body.style.overflow="")}))}m(()=>{y(),h(),p(),g(),v(),b(),console.log("Scripts loaded.")});
